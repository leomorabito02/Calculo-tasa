<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial - Comparador de Instrumentos</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <a href="index.html" class="nav-link">Inicio</a>
        <a href="explicaciones.html" class="nav-link">Explicaciones</a>
        <a href="historial.html" class="nav-link active">Historial General</a>
        <a href="enlaces.html" class="nav-link">Enlaces de Interés</a>
    </nav>
    <div style="height: 5rem;" aria-hidden="true"></div>
    <main class="history-page-container">
        <h1>Historial de cálculos - Comparador de Instrumentos</h1>
        <ul id="historial-comparador-page" class="history-list"></ul>
        <button class="clear-history-btn" onclick="borrarHistorialComparador();location.reload();">Borrar historial</button>
    </main>
    <footer class="footer">
        <div class="footer-content">
            <span>Desarrollado por <strong>Leonardo Morabito</strong></span>
            <span>
                <a href="https://github.com/leomorabito02" target="_blank" rel="noopener" class="footer-link">GitHub</a>
                &nbsp;|&nbsp;
                <a href="https://instagram.com/leomorabito2002" target="_blank" rel="noopener" class="footer-link">Instagram</a>
            </span>
        </div>
    </footer>
    <script>
    function renderizarHistorialComparador() {
        const historial = JSON.parse(localStorage.getItem('historialComparador') || '[]');
        const ul = document.getElementById('historial-comparador-page');
        ul.innerHTML = '';
        if (historial.length === 0) {
            ul.innerHTML = '<li style="color:#888;font-size:0.95rem;">Sin cálculos recientes.</li>';
            return;
        }
        
        historial.forEach(item => {
            const ganadorPlazoFijo = item.diferenciaAbsoluta > 0;
            const ganador = ganadorPlazoFijo ? 'Plazo Fijo' : 'Billetera Virtual';
            const diferencia = Math.abs(item.diferenciaAbsoluta);
            
            ul.innerHTML += `<li style="margin-bottom:12px;padding:10px 14px;background:#f7f7fa;border-radius:7px;box-shadow:0 2px 8px rgba(0,0,0,0.04);">
                <strong>Capital:</strong> $${item.capital.toLocaleString('es-AR', {minimumFractionDigits:2, maximumFractionDigits:2})}<br>
                <strong>Período:</strong> ${item.diasTotal} días<br>
                <strong>Plazo Fijo (${item.tnaPlazoFijo}%):</strong> $${item.montoPlazoFijo.toLocaleString('es-AR', {minimumFractionDigits:2, maximumFractionDigits:2})}<br>
                <strong>Billetera Virtual (${item.tnaBilletera}%):</strong> $${item.montoBilletera.toLocaleString('es-AR', {minimumFractionDigits:2, maximumFractionDigits:2})}<br>
                <strong style="color: ${ganadorPlazoFijo ? '#4caf50' : '#ff9800'};">✓ Ganador: ${ganador}</strong><br>
                <strong>Diferencia:</strong> $${diferencia.toLocaleString('es-AR', {minimumFractionDigits:2, maximumFractionDigits:2})}
            </li>`;
        });
    }
    
    function borrarHistorialComparador() {
        localStorage.removeItem('historialComparador');
        renderizarHistorialComparador();
    }
    
    window.addEventListener('DOMContentLoaded', renderizarHistorialComparador);
    </script>
</body>
</html>
